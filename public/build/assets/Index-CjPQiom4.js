import{x as E,y as Re,r as G,z as Ee,s as F,u as ne,m as ie,k as M,a as V,c as _,e as j,b as e,d as g,h as Ce,o as h,g as y,l as U,w as oe,t as x,f as I,v as O,F as le,p as ae,q as Ne}from"./app-ePVErmDC.js";import{A as Le}from"./AdminLayout-CyNW787d.js";import{_ as Ge}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */var $,de;function Te(){if(de)return $;de=1;function n(i){var s=typeof i;return i!=null&&(s=="object"||s=="function")}return $=n,$}var z,ue;function Fe(){if(ue)return z;ue=1;var n=typeof E=="object"&&E&&E.Object===Object&&E;return z=n,z}var A,fe;function je(){if(fe)return A;fe=1;var n=Fe(),i=typeof self=="object"&&self&&self.Object===Object&&self,s=n||i||Function("return this")();return A=s,A}var B,ce;function Me(){if(ce)return B;ce=1;var n=je(),i=function(){return n.Date.now()};return B=i,B}var D,be;function Ve(){if(be)return D;be=1;var n=/\s/;function i(s){for(var a=s.length;a--&&n.test(s.charAt(a)););return a}return D=i,D}var W,me;function Ue(){if(me)return W;me=1;var n=Ve(),i=/^\s+/;function s(a){return a&&a.slice(0,n(a)+1).replace(i,"")}return W=s,W}var P,pe;function ke(){if(pe)return P;pe=1;var n=je(),i=n.Symbol;return P=i,P}var H,xe;function $e(){if(xe)return H;xe=1;var n=ke(),i=Object.prototype,s=i.hasOwnProperty,a=i.toString,l=n?n.toStringTag:void 0;function v(m){var d=s.call(m,l),f=m[l];try{m[l]=void 0;var o=!0}catch{}var p=a.call(m);return o&&(d?m[l]=f:delete m[l]),p}return H=v,H}var X,ve;function ze(){if(ve)return X;ve=1;var n=Object.prototype,i=n.toString;function s(a){return i.call(a)}return X=s,X}var J,ge;function Ae(){if(ge)return J;ge=1;var n=ke(),i=$e(),s=ze(),a="[object Null]",l="[object Undefined]",v=n?n.toStringTag:void 0;function m(d){return d==null?d===void 0?l:a:v&&v in Object(d)?i(d):s(d)}return J=m,J}var K,he;function Be(){if(he)return K;he=1;function n(i){return i!=null&&typeof i=="object"}return K=n,K}var Q,ye;function De(){if(ye)return Q;ye=1;var n=Ae(),i=Be(),s="[object Symbol]";function a(l){return typeof l=="symbol"||i(l)&&n(l)==s}return Q=a,Q}var Y,_e;function We(){if(_e)return Y;_e=1;var n=Ue(),i=Te(),s=De(),a=NaN,l=/^[-+]0x[0-9a-f]+$/i,v=/^0b[01]+$/i,m=/^0o[0-7]+$/i,d=parseInt;function f(o){if(typeof o=="number")return o;if(s(o))return a;if(i(o)){var p=typeof o.valueOf=="function"?o.valueOf():o;o=i(p)?p+"":p}if(typeof o!="string")return o===0?o:+o;o=n(o);var c=v.test(o);return c||m.test(o)?d(o.slice(2),c?2:8):l.test(o)?a:+o}return Y=f,Y}var Z,we;function Pe(){if(we)return Z;we=1;var n=Te(),i=Me(),s=We(),a="Expected a function",l=Math.max,v=Math.min;function m(d,f,o){var p,c,t,r,b,T,k=0,ee=!1,S=!1,C=!0;if(typeof d!="function")throw new TypeError(a);f=s(f)||0,n(o)&&(ee=!!o.leading,S="maxWait"in o,t=S?l(s(o.maxWait)||0,f):t,C="trailing"in o?!!o.trailing:C);function N(u){var w=p,q=c;return p=c=void 0,k=u,r=d.apply(q,w),r}function Se(u){return k=u,b=setTimeout(R,f),ee?N(u):r}function qe(u){var w=u-T,q=u-k,se=f-w;return S?v(se,t-q):se}function te(u){var w=u-T,q=u-k;return T===void 0||w>=f||w<0||S&&q>=t}function R(){var u=i();if(te(u))return re(u);b=setTimeout(R,qe(u))}function re(u){return b=void 0,C&&p?N(u):(p=c=void 0,r)}function Ie(){b!==void 0&&clearTimeout(b),k=0,p=T=c=b=void 0}function Oe(){return b===void 0?r:re(i())}function L(){var u=i(),w=te(u);if(p=arguments,c=this,T=u,w){if(b===void 0)return Se(T);if(S)return clearTimeout(b),b=setTimeout(R,f),N(T)}return b===void 0&&(b=setTimeout(R,f)),r}return L.cancel=Ie,L.flush=Oe,L}return Z=m,Z}var He=Pe();const Xe=Re(He),Je={key:0,class:"fixed inset-0 z-[9999] bg-black/60 flex flex-col items-center justify-center text-white backdrop-blur-sm"},Ke={class:"container mx-auto px-4 py-6"},Qe={class:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4"},Ye={class:"bg-white rounded-lg shadow-sm border border-green-500 overflow-hidden mb-6"},Ze={class:"p-6"},et={class:"flex-grow w-full md:w-auto"},tt={key:0,class:"text-red-500 text-xs mt-1"},rt={class:"flex gap-2 w-full md:w-auto"},st=["disabled"],nt={class:"bg-white rounded-lg shadow-sm border border-slate-200"},it={class:"p-4 border-b border-slate-100 bg-slate-50/50"},ot={class:"grid grid-cols-1 md:grid-cols-12 gap-3 items-center"},lt={class:"md:col-span-2"},at={class:"md:col-span-3"},dt={class:"md:col-span-3"},ut={class:"md:col-span-3"},ft={key:0,class:"mt-2 text-right"},ct={class:"overflow-x-auto"},bt={class:"w-full text-left border-collapse"},mt={class:"text-sm text-slate-700 divide-y divide-slate-100"},pt={class:"p-3"},xt={class:"bg-slate-200 text-slate-700 px-2 py-1 rounded text-xs font-bold font-mono"},vt={class:"p-3 text-slate-500"},gt={class:"p-3 font-medium text-slate-800"},ht={class:"p-3"},yt={class:"text-xs text-slate-500 flex items-center gap-1"},_t={class:"text-xs text-slate-500 flex items-center gap-1 mt-1"},wt={class:"p-3 text-xs text-slate-500 leading-relaxed"},Tt={class:"p-3"},jt={class:"p-3 text-right whitespace-nowrap"},kt=["onClick"],St={key:0},qt={key:0,class:"p-4 border-t border-slate-100 bg-slate-50 flex justify-center"},It={class:"flex gap-1"},Ot={key:1,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Rt={class:"bg-white rounded-lg shadow-2xl w-full max-w-md relative z-10 overflow-hidden animate-zoom-in"},Et={class:"bg-red-600 text-white px-4 py-3 font-bold flex justify-between items-center"},Ct={class:"p-6"},Nt={class:"flex justify-end gap-2"},Lt=["disabled"],Gt={__name:"Index",props:{members:Object,filters:Object},setup(n){const s=G({...n.filters});Ee(s,Xe(c=>{F.get(route("admin.members.index"),c,{preserveState:!0,replace:!0})},500),{deep:!0});const a=()=>{s.value={member_id:"",first_name:"",last_name:"",phone:""},F.get(route("admin.members.index"))},l=ne({file:null}),v=G(null),m=()=>{if(!l.file)return alert("กรุณาเลือกไฟล์");l.post(route("admin.members.import"),{onSuccess:()=>{l.reset(),v.value&&(v.value.value="")},onError:()=>alert("เกิดข้อผิดพลาดในการนำเข้าข้อมูล")})},d=G(!1),f=ne({password:""}),o=()=>{f.delete(route("admin.members.truncate"),{onSuccess:()=>{d.value=!1,f.reset()}})},p=c=>{confirm("ยืนยันการลบข้อมูลสมาชิกรายนี้?")&&F.delete(route("admin.members.destroy",c))};return(c,t)=>(h(),ie(Le,null,{default:M(()=>[V(g(Ce),{title:"จัดการข้อมูลสมาชิก"}),g(l).processing?(h(),_("div",Je,[...t[10]||(t[10]=[e("div",{class:"w-12 h-12 border-4 border-white border-t-transparent rounded-full animate-spin mb-4"},null,-1),e("h4",{class:"text-xl font-bold"},"กำลังนำเข้าข้อมูล...",-1),e("p",{class:"text-sm opacity-80"},"กรุณารอสักครู่ อย่าปิดหน้าต่างนี้",-1)])])):j("",!0),e("div",Ke,[e("div",Qe,[t[12]||(t[12]=e("h2",{class:"text-2xl font-bold text-slate-700 flex items-center gap-2"},[e("i",{class:"bi bi-people-fill"}),y(" จัดการข้อมูลสมาชิก ")],-1)),V(g(U),{href:c.route("admin.members.create"),class:"btn-primary"},{default:M(()=>[...t[11]||(t[11]=[e("i",{class:"bi bi-plus-lg"},null,-1),y(" เพิ่มสมาชิกรายคน ",-1)])]),_:1},8,["href"])]),e("div",Ye,[t[17]||(t[17]=e("div",{class:"bg-green-600 text-white px-4 py-3 font-bold flex items-center gap-2"},[e("i",{class:"bi bi-file-earmark-spreadsheet"}),y(" นำเข้าข้อมูลจาก Excel ")],-1)),e("div",Ze,[e("form",{onSubmit:oe(m,["prevent"]),class:"flex flex-col md:flex-row items-center gap-4"},[t[15]||(t[15]=e("div",{class:"flex-shrink-0 font-medium text-slate-700"},"เลือกไฟล์ Excel (.xlsx, .csv):",-1)),e("div",et,[e("input",{type:"file",ref_key:"fileInput",ref:v,onInput:t[0]||(t[0]=r=>g(l).file=r.target.files[0]),class:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100 border border-slate-300 rounded-md p-1",required:""},null,544),g(l).errors.file?(h(),_("div",tt,x(g(l).errors.file),1)):j("",!0)]),e("div",rt,[e("button",{type:"submit",disabled:g(l).processing,class:"btn-success flex-grow justify-center md:flex-grow-0"},[...t[13]||(t[13]=[e("i",{class:"bi bi-cloud-upload"},null,-1),y(" Upload & Import ",-1)])],8,st),e("button",{type:"button",onClick:t[1]||(t[1]=r=>d.value=!0),class:"btn-danger flex-grow justify-center md:flex-grow-0"},[...t[14]||(t[14]=[e("i",{class:"bi bi-trash-fill"},null,-1),y(" ล้างข้อมูลทั้งหมด ",-1)])])])],32),t[16]||(t[16]=e("p",{class:"text-xs text-slate-500 mt-2"},"* คำเตือน ในการอัพโหลด excel ให้อัพทีละช่วงปี ไม่ให้อัพทีละหลายๆหน้า",-1))])]),e("div",nt,[e("div",it,[e("div",ot,[e("div",lt,[I(e("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>s.value.member_id=r),type:"text",placeholder:"รหัสสมาชิก",class:"form-input"},null,512),[[O,s.value.member_id]])]),e("div",at,[I(e("input",{"onUpdate:modelValue":t[3]||(t[3]=r=>s.value.first_name=r),type:"text",placeholder:"ชื่อจริง",class:"form-input"},null,512),[[O,s.value.first_name]])]),e("div",dt,[I(e("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>s.value.last_name=r),type:"text",placeholder:"นามสกุล",class:"form-input"},null,512),[[O,s.value.last_name]])]),e("div",ut,[I(e("input",{"onUpdate:modelValue":t[5]||(t[5]=r=>s.value.phone=r),type:"text",placeholder:"เบอร์โทรศัพท์",class:"form-input"},null,512),[[O,s.value.phone]])]),t[18]||(t[18]=e("div",{class:"md:col-span-1 text-center"},[e("button",{disabled:"",class:"w-full bg-blue-500 text-white rounded p-2 opacity-50 cursor-default"},[e("i",{class:"bi bi-search"})])],-1))]),s.value.member_id||s.value.first_name||s.value.last_name||s.value.phone?(h(),_("div",ft,[e("button",{onClick:a,class:"text-red-500 text-sm hover:underline"},[...t[19]||(t[19]=[e("i",{class:"bi bi-x-circle"},null,-1),y(" ล้างการค้นหา ",-1)])])])):j("",!0)]),e("div",ct,[e("table",bt,[t[25]||(t[25]=e("thead",{class:"bg-slate-100 text-slate-600 text-sm uppercase font-semibold"},[e("tr",null,[e("th",{class:"p-3 border-b"},"รหัสสมาชิก"),e("th",{class:"p-3 border-b"},"เลขบัตร ปชช."),e("th",{class:"p-3 border-b"},"ชื่อ - นามสกุล"),e("th",{class:"p-3 border-b"},"ข้อมูลการสมัคร"),e("th",{class:"p-3 border-b w-1/4"},"ที่อยู่"),e("th",{class:"p-3 border-b"},"เบอร์โทร"),e("th",{class:"p-3 border-b text-right"},"จัดการ")])],-1)),e("tbody",mt,[(h(!0),_(le,null,ae(n.members.data,r=>(h(),_("tr",{key:r.id,class:"hover:bg-slate-50 transition-colors"},[e("td",pt,[e("span",xt,x(r.member_id),1)]),e("td",vt,x(r.id_card||"-"),1),e("td",gt,x(r.title_name)+x(r.first_name)+" "+x(r.last_name),1),e("td",ht,[e("div",yt,[t[20]||(t[20]=e("i",{class:"bi bi-calendar"},null,-1)),y(" "+x(r.registry_date||"-"),1)]),e("div",_t,[t[21]||(t[21]=e("i",{class:"bi bi-flag"},null,-1)),y(" "+x(r.nation||"-"),1)])]),e("td",wt,x(r.loc_addr)+" "+x(r.tambon)+" "+x(r.amphur)+" "+x(r.province)+" "+x(r.zip_code),1),e("td",Tt,x(r.phone||"-"),1),e("td",jt,[V(g(U),{href:c.route("admin.members.edit",r.id),class:"btn-icon-warning mr-1"},{default:M(()=>[...t[22]||(t[22]=[e("i",{class:"bi bi-pencil"},null,-1)])]),_:1},8,["href"]),e("button",{onClick:b=>p(r.id),class:"btn-icon-danger"},[...t[23]||(t[23]=[e("i",{class:"bi bi-trash"},null,-1)])],8,kt)])]))),128)),n.members.data.length===0?(h(),_("tr",St,[...t[24]||(t[24]=[e("td",{colspan:"7",class:"p-10 text-center text-slate-400"},[e("i",{class:"bi bi-inbox text-4xl block mb-2 opacity-50"}),y(" ไม่พบข้อมูลสมาชิก ")],-1)])])):j("",!0)])])]),n.members.links.length>3?(h(),_("div",qt,[e("div",It,[(h(!0),_(le,null,ae(n.members.links,(r,b)=>(h(),ie(g(U),{key:b,href:r.url||"#",innerHTML:r.label,class:Ne(["px-3 py-1 rounded text-sm transition-colors border",{"bg-blue-600 text-white border-blue-600":r.active,"bg-white text-slate-600 border-slate-200 hover:bg-slate-100":!r.active,"opacity-50 pointer-events-none":!r.url}])},null,8,["href","innerHTML","class"]))),128))])])):j("",!0)])]),d.value?(h(),_("div",Ot,[e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t[6]||(t[6]=r=>d.value=!1)}),e("div",Rt,[e("div",Et,[t[27]||(t[27]=e("span",null,[e("i",{class:"bi bi-exclamation-triangle-fill"}),y(" คำเตือน: ล้างข้อมูลทั้งหมด")],-1)),e("button",{onClick:t[7]||(t[7]=r=>d.value=!1),class:"text-white hover:text-red-200"},[...t[26]||(t[26]=[e("i",{class:"bi bi-x-lg"},null,-1)])])]),e("div",Ct,[t[29]||(t[29]=e("p",{class:"text-red-600 font-bold mb-2"},'คุณกำลังจะลบข้อมูลสมาชิก "ทั้งหมด" ออกจากระบบ!',-1)),t[30]||(t[30]=e("p",{class:"text-slate-600 text-sm mb-4"},"ข้อมูลจะไม่สามารถกู้คืนได้ เพื่อความปลอดภัย กรุณากรอกรหัสผ่านของคุณเพื่อยืนยัน:",-1)),e("form",{onSubmit:oe(o,["prevent"])},[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1"},"รหัสผ่าน Admin:",-1)),I(e("input",{type:"password","onUpdate:modelValue":t[8]||(t[8]=r=>g(f).password=r),class:"form-input w-full mb-4",placeholder:"กรอกรหัสผ่านของคุณ...",required:""},null,512),[[O,g(f).password]]),e("div",Nt,[e("button",{type:"button",onClick:t[9]||(t[9]=r=>d.value=!1),class:"px-4 py-2 bg-slate-200 text-slate-700 rounded hover:bg-slate-300 text-sm"}," ยกเลิก "),e("button",{type:"submit",disabled:g(f).processing,class:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 text-sm font-bold"}," ยืนยันลบข้อมูลทั้งหมด ",8,Lt)])],32)])])])):j("",!0)]),_:1}))}},$t=Ge(Gt,[["__scopeId","data-v-2e4e3864"]]);export{$t as default};
