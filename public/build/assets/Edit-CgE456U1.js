import{u as C,r as c,m as V,k as p,a as m,b as t,d as l,h as L,l as f,g as d,t as g,w as B,f as x,v,c as r,o as i,F as E,n as P,e as S}from"./app-CrcszExD.js";import{A as j}from"./AdminLayout-DfhxSju4.js";import{_ as F,E as K,P as N,H as U,B as I,I as D,F as M,L as q,a as z,b as A,T as H,c as Q,U as R,C as W}from"./ckeditor5-CpJ7LKT-.js";/* empty css            */import"./_plugin-vue_export-helper-DlAUqK2U.js";const $={class:"max-w-4xl mx-auto"},G={class:"flex items-center gap-2 mb-6 text-sm text-slate-500"},O={class:"bg-white p-8 rounded-xl shadow-sm border border-slate-200"},J={class:"flex items-center gap-3 mb-6 border-b border-slate-100 pb-4"},X={class:"text-xl font-bold text-slate-800"},Y={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Z={class:"ck-editor-wrapper"},ee={class:"bg-slate-50 p-6 rounded-lg border border-slate-200"},te={key:0,class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"},se=["src"],le=["onClick"],oe={key:1,class:"text-center py-4 text-slate-400 text-sm italic border-2 border-dashed border-slate-200 rounded-lg mb-4"},ae={class:"flex items-center gap-4"},ie={class:"cursor-pointer bg-white border border-slate-300 hover:border-blue-500 hover:text-blue-600 text-slate-600 px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 shadow-sm"},re={key:0,class:"text-sm text-green-600 font-medium animate-pulse"},ne={class:"flex justify-end gap-3 pt-4 border-t border-slate-100"},de=["disabled"],ue={key:0,class:"bi bi-hourglass-split animate-spin"},me={key:1,class:"bi bi-save"},ve={__name:"Edit",props:{page:Object,pageKey:String},setup(b){const n=b,s=C({_method:"PUT",title:n.page.title||"",subtitle:n.page.subtitle||"",content:n.page.content||"",cover_image:null,upload_images:[],remove_images:[]});c(n.page.image_url||null);const h=W,y={licenseKey:"GPL",plugins:[K,N,U,I,D,M,q,z,A,H,Q,R],toolbar:["undo","redo","|","heading","|","bold","italic","fontSize","fontColor","|","bulletedList","numberedList","|","link","insertTable","blockQuote"],table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]}},u=c(n.page.images||[]),w=a=>{s.remove_images.push(a),u.value=u.value.filter(e=>e!==a)},_=()=>{s.post(route("admin.pages.update",n.pageKey),{onSuccess:()=>{s.upload_images=[],s.remove_images=[],s.cover_image=null}})},k=a=>({member:"สิทธิประโยชน์สมาชิก (Member)",board:"สวัสดิการ (Welfare)",ezpoint:"Easy Point"})[a]||a;return(a,e)=>(i(),V(j,null,{default:p(()=>[m(l(L),{title:"แก้ไข: "+b.pageKey},null,8,["title"]),t("div",$,[t("div",G,[m(l(f),{href:a.route("admin.dashboard"),class:"hover:text-blue-600"},{default:p(()=>[...e[4]||(e[4]=[d("Dashboard",-1)])]),_:1},8,["href"]),e[5]||(e[5]=t("i",{class:"bi bi-chevron-right text-xs"},null,-1)),e[6]||(e[6]=t("span",{class:"text-slate-800 font-bold"},"แก้ไขเนื้อหา",-1))]),t("div",O,[t("div",J,[e[8]||(e[8]=t("div",{class:"w-10 h-10 rounded-lg bg-blue-50 text-blue-600 flex items-center justify-center text-xl"},[t("i",{class:"bi bi-pencil-square"})],-1)),t("div",null,[t("h2",X,"แก้ไข: "+g(k(b.pageKey)),1),e[7]||(e[7]=t("p",{class:"text-xs text-slate-500"},"ปรับปรุงข้อมูลที่แสดงหน้าเว็บไซต์",-1))])]),t("form",{onSubmit:B(_,["prevent"]),class:"space-y-8"},[t("div",Y,[t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-slate-700 mb-1"},"หัวข้อหลัก (Title)",-1)),x(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>l(s).title=o),type:"text",class:"form-input",required:""},null,512),[[v,l(s).title]])]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-slate-700 mb-1"},"คำโปรย (Subtitle)",-1)),x(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>l(s).subtitle=o),type:"text",class:"form-input"},null,512),[[v,l(s).subtitle]])])]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-slate-700 mb-1"},"รายละเอียดเนื้อหา (Content)",-1)),t("div",Z,[m(l(F),{editor:l(h),modelValue:l(s).content,"onUpdate:modelValue":e[2]||(e[2]=o=>l(s).content=o),config:y},null,8,["editor","modelValue"])]),e[12]||(e[12]=t("p",{class:"text-xs text-slate-400 mt-1"}," * สามารถพิมพ์และจัดรูปแบบได้เหมือน Word (ตัวหนา, ตัวเอียง, จัดย่อหน้า) ",-1))]),t("div",ee,[e[16]||(e[16]=t("h3",{class:"font-bold text-slate-700 mb-4 flex items-center gap-2"},[t("i",{class:"bi bi-images"}),d(" จัดการรูปภาพประกอบ (ในเนื้อหา) ")],-1)),u.value.length>0?(i(),r("div",te,[(i(!0),r(E,null,P(u.value,(o,T)=>(i(),r("div",{key:T,class:"group relative aspect-video bg-white rounded-lg overflow-hidden shadow-sm border border-slate-200"},[t("img",{src:o,class:"w-full h-full object-cover"},null,8,se),t("button",{type:"button",onClick:be=>w(o),class:"absolute top-2 right-2 bg-red-500 text-white w-8 h-8 rounded-full flex items-center justify-center shadow-md hover:bg-red-600 transition-transform hover:scale-110",title:"ลบรูปนี้"},[...e[13]||(e[13]=[t("i",{class:"bi bi-trash-fill text-sm"},null,-1)])],8,le)]))),128))])):(i(),r("div",oe," ยังไม่มีรูปภาพประกอบ ")),t("div",ae,[t("label",ie,[e[14]||(e[14]=t("i",{class:"bi bi-cloud-upload"},null,-1)),e[15]||(e[15]=d(" อัปโหลดรูปเพิ่ม... ",-1)),t("input",{type:"file",multiple:"",onInput:e[3]||(e[3]=o=>l(s).upload_images=o.target.files),class:"hidden",accept:"image/*"},null,32)]),l(s).upload_images.length?(i(),r("span",re," เลือกแล้ว "+g(l(s).upload_images.length)+" ไฟล์ ",1)):S("",!0)])]),t("div",ne,[m(l(f),{href:a.route("admin.dashboard"),class:"px-6 py-2.5 bg-white border border-slate-300 text-slate-600 rounded-lg hover:bg-slate-50 font-medium transition-colors"},{default:p(()=>[...e[17]||(e[17]=[d(" ยกเลิก ",-1)])]),_:1},8,["href"]),t("button",{type:"submit",disabled:l(s).processing,class:"px-8 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-bold shadow-md hover:shadow-lg transition-all flex items-center gap-2"},[l(s).processing?(i(),r("i",ue)):(i(),r("i",me)),d(" "+g(l(s).processing?"กำลังบันทึก...":"บันทึกการแก้ไข"),1)],8,de)])],32)])])]),_:1}))}};export{ve as default};
