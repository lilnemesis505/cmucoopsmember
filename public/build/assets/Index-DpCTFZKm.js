import{m as _,k as p,a as h,b as e,c as r,d as w,h as C,g as n,o as l,F as S,p as B,t as c,l as E,s as y,K as $}from"./app-B_YlG3A5.js";import{A as j}from"./AdminLayout-Dxp03VKX.js";import{S as a}from"./sweetalert2.esm.all-BQxta0Da.js";/* empty css            */import"./_plugin-vue_export-helper-DlAUqK2U.js";const A={key:0,class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"},I={class:"relative h-32 bg-slate-100 overflow-hidden"},L=["src","alt"],N={key:1,class:"w-full h-full flex items-center justify-center text-slate-300"},T={class:"absolute top-2 right-2"},V={class:"bg-black/70 backdrop-blur-sm text-white text-xs font-bold px-2 py-1 rounded-full uppercase"},F={class:"p-4"},K=["title"],O={class:"text-xs text-blue-600 mb-2 flex items-center gap-1"},X={class:"text-slate-500 text-xs line-clamp-2 h-8 mb-4"},z={key:1,class:"bg-white rounded-xl border-2 border-dashed border-slate-300 p-12 text-center"},P={__name:"Index",props:{events:Array},setup(f){const v=()=>{a.fire({title:"ยืนยันการ Sync?",text:"ระบบจะทยอยดึงรูปจาก Clound server เข้ามาในระบบ กรุณาเปิดหน้านี้ค้างไว้",icon:"info",showCancelButton:!0,confirmButtonText:"เริ่มการ Sync",confirmButtonColor:"#3b82f6",cancelButtonText:"ยกเลิก"}).then(async m=>{if(m.isConfirmed){let t=5,s=100,i=1,u=0,b=0,g=0,x=0;a.fire({title:"กำลังเริ่มต้น...",html:"เตรียมการเชื่อมต่อ ImageKit",allowOutsideClick:!1,didOpen:()=>a.showLoading()});try{for(;i<=s;){let d=i+t-1;a.update({title:"กำลังประมวลผล...",html:`ตรวจสอบโฟลเดอร์ <b>ev${i} - ev${d}</b><br><small>เจอ Event ใหม่: ${u} | รูปใหม่: ${b}</small>`});const o=(await $.get(route("admin.events.sync"),{params:{start:i,end:d}})).data;if(o.success)if(u+=o.created,b+=o.synced,g+=o.skipped,o.empty_batch){if(x++,x>=2)break}else x=0;else throw new Error(o.message);i+=t}await a.fire({title:"Sync เสร็จสิ้นสมบูรณ์!",html:`ตรวจสอบครบถ้วน<br>Event ใหม่: <b>${u}</b><br>นำเข้ารูปใหม่: <b>${b}</b><br>ข้ามรูปเดิม: <b>${g}</b>`,icon:"success"}),y.reload()}catch(d){a.fire("เกิดข้อผิดพลาด",d.message||"Connection Error","error")}}})},k=()=>{y.post(route("admin.events.create"))};return(m,t)=>(l(),_(j,null,{default:p(()=>[h(w(C),{title:"จัดการ X-Cademy"}),e("div",{class:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4"},[t[2]||(t[2]=e("div",null,[e("h2",{class:"text-2xl font-bold text-slate-800 flex items-center gap-2"},[e("i",{class:"bi bi-calendar-week text-orange-500"}),n(" จัดการข่าวสารและกิจกรรม ")]),e("p",{class:"text-slate-500 text-sm"},"รายการกิจกรรมทั้งหมดในระบบ X-Cademy")],-1)),e("div",{class:"flex gap-3"},[e("button",{onClick:k,class:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg shadow-sm transition-colors flex items-center gap-2 text-sm font-medium"},[...t[0]||(t[0]=[e("i",{class:"bi bi-plus-lg"},null,-1),n(" เพิ่มกิจกรรมใหม่ ",-1)])]),e("button",{onClick:v,class:"bg-white border border-orange-300 text-orange-600 hover:bg-orange-50 px-4 py-2 rounded-lg shadow-sm transition-colors flex items-center gap-2 text-sm font-medium"},[...t[1]||(t[1]=[e("i",{class:"bi bi-cloud-download-fill"},null,-1),n(" Sync รูป ",-1)])])])]),f.events.length>0?(l(),r("div",A,[(l(!0),r(S,null,B(f.events,s=>(l(),r("div",{key:s.id,class:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden hover:shadow-md hover:-translate-y-1 transition-all duration-300 group"},[e("div",I,[s.images&&s.images.length>0?(l(),r("img",{key:0,src:s.images[0].image_url+"?tr=w-400,h-300",class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500",alt:s.title},null,8,L)):(l(),r("div",N,[...t[3]||(t[3]=[e("i",{class:"bi bi-image text-4xl"},null,-1)])])),e("div",T,[e("span",V,c(s.key),1)])]),e("div",F,[e("h3",{class:"font-bold text-slate-800 text-sm mb-1 truncate",title:s.title},c(s.title||"ไม่มีชื่อกิจกรรม"),9,K),e("p",O,[t[4]||(t[4]=e("i",{class:"bi bi-calendar3"},null,-1)),n(" "+c(s.event_date||"-"),1)]),e("p",X,c(s.description||"-"),1),h(w(E),{href:m.route("admin.events.edit",s.key),class:"block w-full text-center bg-white border border-blue-500 text-blue-600 hover:bg-blue-600 hover:text-white py-1.5 rounded-lg text-xs font-bold transition-colors"},{default:p(()=>[...t[5]||(t[5]=[e("i",{class:"bi bi-gear-fill mr-1"},null,-1),n(" จัดการ ",-1)])]),_:1},8,["href"])])]))),128))])):(l(),r("div",z,[...t[6]||(t[6]=[e("div",{class:"w-16 h-16 bg-slate-100 text-slate-400 rounded-full flex items-center justify-center mx-auto mb-4"},[e("i",{class:"bi bi-inbox text-3xl"})],-1),e("h3",{class:"text-slate-600 font-medium"},"ยังไม่มีกิจกรรม",-1),e("p",{class:"text-slate-400 text-sm mt-1"},'เริ่มต้นโดยการกดปุ่ม "เพิ่มกิจกรรมใหม่"',-1)])]))]),_:1}))}};export{P as default};
