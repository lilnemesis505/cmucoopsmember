import{u as V,r as C,D,V as S,m as _,k as j,a as B,b as t,d as a,h as L,c as n,e as h,g as c,w as T,f as b,v as p,o as d,t as i,F as y,p as v,q as U,n as A,s as N}from"./app-ePVErmDC.js";import{A as $}from"./AppLayoutMember-DZB7CY82.js";/* empty css            */import"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"container py-5"},F={class:"row justify-content-center"},H={class:"col-lg-12"},E={class:"card shadow-sm mb-4 border-0"},O={class:"card-body bg-light p-4 rounded"},q={class:"row g-2"},I={class:"col-md-2"},G={class:"col-md-3"},J={class:"col-md-2"},K={class:"col-md-2"},P={class:"col-md-3"},Q={class:"row mt-4"},R={class:"col-12 text-center"},W=["disabled"],X={key:0,class:"card shadow-sm border-0"},Y={class:"card-header bg-primary text-white"},Z={class:"mb-0"},tt={class:"card-body p-0"},st={class:"table-responsive"},et={class:"table table-hover mb-0 align-middle"},lt={class:"badge bg-info text-dark",style:{"font-size":"0.9rem"}},ot={class:"text-muted"},at=["onClick"],dt={key:0,class:"text-dark fw-bold"},nt={key:1,class:"text-muted"},it={key:0},rt={key:0,class:"card-footer bg-white d-flex justify-content-center py-3"},ct={class:"pagination mb-0"},mt={class:"modal fade",id:"addressModal",tabindex:"-1","aria-hidden":"true"},ut={class:"modal-dialog modal-dialog-centered"},bt={class:"modal-content"},pt={class:"modal-body p-4 text-center"},ht={class:"fw-bold text-primary mb-3"},ft={class:"p-3 bg-light rounded border"},xt={class:"mb-0"},wt={__name:"CheckMember",props:{members:Object,filters:Object,hasSearch:Boolean},setup(r){const m=r,l=V({member_id:m.filters.member_id||"",id_card:m.filters.id_card||"",first_name:m.filters.first_name||"",last_name:m.filters.last_name||"",phone:m.filters.phone||""}),g=()=>{l.get(route("check.member"),{preserveState:!0,replace:!0})},w=()=>{l.member_id="",l.id_card="",l.first_name="",l.last_name="",l.phone="",N.get(route("check.member"))},f=C({name:"",address:""});let x=null;D(()=>{const o=document.getElementById("addressModal");o&&(x=new S(o))});const k=o=>{const e=[o.loc_addr,o.tambon,o.amphur,o.province,o.zip_code].filter(u=>u&&u!=="-").join(" ")||"-";f.value={name:`${o.title_name}${o.first_name} ${o.last_name}`,address:e},x.show()},M=o=>o?new Date(o).toLocaleDateString("th-TH",{day:"2-digit",month:"2-digit",year:"numeric"}):"-";return(o,s)=>(d(),_($,null,{default:j(()=>[B(a(L),{title:"ตรวจสอบสถานะสมาชิก"}),t("div",z,[t("div",F,[t("div",H,[s[19]||(s[19]=t("h2",{class:"text-center mb-4 fw-bold text-primary"},[t("i",{class:"bi bi-person-vcard"}),c(" ตรวจสอบสถานะสมาชิก ")],-1)),t("div",E,[t("div",O,[t("form",{onSubmit:T(g,["prevent"])},[s[12]||(s[12]=t("h5",{class:"mb-3 text-secondary"},[t("i",{class:"bi bi-search"}),c(" ค้นหาข้อมูล")],-1)),t("div",q,[t("div",I,[s[5]||(s[5]=t("label",{class:"form-label small text-muted"},"รหัสสมาชิก",-1)),b(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>a(l).member_id=e),type:"text",class:"form-control",placeholder:"เช่น 132xx"},null,512),[[p,a(l).member_id]])]),t("div",G,[s[6]||(s[6]=t("label",{class:"form-label small text-muted"},"เลขบัตรประชาชน",-1)),b(t("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>a(l).id_card=e),type:"text",class:"form-control",placeholder:"เลข 13 หลัก"},null,512),[[p,a(l).id_card]])]),t("div",J,[s[7]||(s[7]=t("label",{class:"form-label small text-muted"},"ชื่อจริง",-1)),b(t("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>a(l).first_name=e),type:"text",class:"form-control",placeholder:"ระบุชื่อ"},null,512),[[p,a(l).first_name]])]),t("div",K,[s[8]||(s[8]=t("label",{class:"form-label small text-muted"},"นามสกุล",-1)),b(t("input",{"onUpdate:modelValue":s[3]||(s[3]=e=>a(l).last_name=e),type:"text",class:"form-control",placeholder:"ระบุนามสกุล"},null,512),[[p,a(l).last_name]])]),t("div",P,[s[9]||(s[9]=t("label",{class:"form-label small text-muted"},"เบอร์โทรศัพท์",-1)),b(t("input",{"onUpdate:modelValue":s[4]||(s[4]=e=>a(l).phone=e),type:"text",class:"form-control",placeholder:"08xxxxxxxx"},null,512),[[p,a(l).phone]])])]),t("div",Q,[t("div",R,[t("button",{type:"submit",class:"btn btn-primary px-5 rounded-pill shadow-sm",disabled:a(l).processing},[...s[10]||(s[10]=[t("i",{class:"bi bi-search"},null,-1),c(" ค้นหาข้อมูล ",-1)])],8,W),s[11]||(s[11]=t("a",{href:"https://www.cmu-coops.com/login.php",target:"_blank",class:"btn btn-success px-3 ms-2 rounded-pill shadow-sm text-decoration-none fw-bold"}," เข้าสู่ระบบสมาชิก ",-1)),r.hasSearch?(d(),n("button",{key:0,type:"button",onClick:w,class:"btn btn-outline-secondary px-4 rounded-pill ms-2"}," ล้างค่า ")):h("",!0)])])],32)])]),r.hasSearch?(d(),n("div",X,[t("div",Y,[t("h5",Z,"ผลการค้นหา ("+i(r.members.total)+" รายการ)",1)]),t("div",tt,[t("div",st,[t("table",et,[s[18]||(s[18]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"รหัสสมาชิก"),t("th",null,"ชื่อ - นามสกุล"),t("th",null,"วันที่สมัคร"),t("th",null,"จังหวัด"),t("th",null,"เบอร์โทรศัพท์"),t("th",null,"สถานะ")])],-1)),t("tbody",null,[(d(!0),n(y,null,v(r.members.data,e=>(d(),n("tr",{key:e.id},[t("td",null,[t("span",lt,i(e.member_id),1)]),t("td",null,i(e.title_name)+i(e.first_name)+" "+i(e.last_name),1),t("td",null,[t("span",ot,[s[13]||(s[13]=t("i",{class:"bi bi-calendar-event"},null,-1)),c(" "+i(M(e.registry_date)),1)])]),t("td",null,[t("button",{type:"button",class:"btn btn-sm btn-outline-primary rounded-pill px-3",onClick:u=>k(e)},[s[14]||(s[14]=t("i",{class:"bi bi-geo-alt-fill"},null,-1)),c(" "+i(e.province||"ไม่ระบุ"),1)],8,at)]),t("td",null,[e.phone?(d(),n("span",dt,[s[15]||(s[15]=t("i",{class:"bi bi-telephone-fill text-success"},null,-1)),c(" "+i(e.phone),1)])):(d(),n("span",nt,"-"))]),s[16]||(s[16]=t("td",null,[t("span",{class:"badge bg-success rounded-pill"},"ปกติ")],-1))]))),128)),r.members.data.length===0?(d(),n("tr",it,[...s[17]||(s[17]=[t("td",{colspan:"6",class:"text-center py-5 text-muted"},[t("i",{class:"bi bi-emoji-frown display-4 d-block mb-3"}),t("h5",null,"ไม่พบข้อมูลที่ตรงกัน"),t("p",{class:"small"},"กรุณาตรวจสอบความถูกต้องของข้อมูลที่กรอก")],-1)])])):h("",!0)])])])]),r.members.links&&r.members.data.length>0?(d(),n("div",rt,[t("nav",null,[t("ul",ct,[(d(!0),n(y,null,v(r.members.links,(e,u)=>(d(),n("li",{key:u,class:U(["page-item",{active:e.active,disabled:!e.url}])},[(d(),_(A(e.url?"Link":"span"),{href:e.url,class:"page-link",innerHTML:e.label},null,8,["href","innerHTML"]))],2))),128))])])])):h("",!0)])):h("",!0)])])]),t("div",mt,[t("div",ut,[t("div",bt,[s[21]||(s[21]=t("div",{class:"modal-header bg-primary text-white"},[t("h5",{class:"modal-title"},[t("i",{class:"bi bi-house-door-fill"}),c(" รายละเอียดที่อยู่")]),t("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("div",pt,[t("h5",ht,i(f.value.name),1),t("div",ft,[s[20]||(s[20]=t("p",{class:"mb-1 text-muted small"},"ที่อยู่จัดส่งเอกสาร",-1)),t("h5",xt,i(f.value.address),1)])]),s[22]||(s[22]=t("div",{class:"modal-footer justify-content-center"},[t("button",{type:"button",class:"btn btn-secondary px-4","data-bs-dismiss":"modal"},"ปิดหน้าต่าง")],-1))])])])]),_:1}))}};export{wt as default};
