import{u as $,r as v,m as C,k as b,a as p,b as t,d as l,h as q,o as i,n as D,g as d,c as n,F as T,p as S,q as m,t as f,w as V,e as y,f as j,v as F,T as L,l as G}from"./app-ePVErmDC.js";import{A}from"./AdminLayout-CyNW787d.js";import{_ as H,E as M,P as Q,H as R,B as O,I as J,F as U,L as W,a as X,b as Y,T as Z,c as ee,U as te,C as se}from"./ckeditor5-_j83Zx2X.js";/* empty css            */import"./_plugin-vue_export-helper-DlAUqK2U.js";const le={class:"max-w-4xl mx-auto"},oe={class:"bg-white p-3 rounded-xl shadow-sm border border-slate-200 mb-6 flex flex-wrap items-center justify-between gap-4 sticky top-4 z-20"},ae={class:"flex items-center gap-2"},ie={class:"flex bg-slate-100 rounded-lg p-1"},ne=["onClick"],re={class:"bg-white p-8 rounded-xl shadow-sm border border-slate-200"},de={class:"text-2xl font-bold text-slate-800 mb-6"},ue={class:"flex gap-4 items-start bg-slate-50 p-4 rounded-lg border border-slate-100"},ce={key:0,class:"w-32 h-20 shrink-0"},be=["src"],pe={class:"flex-grow"},me={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},fe={class:"col-span-2"},ge={class:"col-span-2"},xe={class:"bg-slate-50 p-4 rounded-lg border border-slate-200 select-none"},ve={class:"flex justify-between items-center mb-3"},ye={key:0,class:"grid grid-cols-4 md:grid-cols-6 gap-3 mb-4"},he=["onClick"],we=["src"],ke=["onClick"],_e={key:1,class:"text-center p-8 border-2 border-dashed border-slate-300 rounded-lg text-slate-400 mb-4"},Ce={class:"flex items-center gap-2"},Te={class:"cursor-pointer bg-white border border-slate-300 hover:border-purple-500 text-slate-600 px-4 py-2 rounded-full text-sm font-medium transition-colors shadow-sm flex items-center gap-2"},Se={key:0,class:"text-sm text-purple-600 ml-2"},Ve={key:0,class:"text-sm text-red-600 mt-3 font-medium flex items-center gap-2 bg-red-50 p-2 rounded-lg border border-red-100"},je={class:"flex justify-end gap-3 pt-4 border-t border-slate-100"},Fe=["disabled"],Le={key:0,class:"bi bi-hourglass-split animate-spin"},Be={key:1,class:"bi bi-save"},Ne={__name:"Edit",props:{post:Object},setup(g){const c=g,o=$({_method:"PUT",title:c.post.title,subtitle:c.post.subtitle,content:c.post.content,cover_image:null,gallery_images:[],remove_images:[]}),B=se,P={licenseKey:"GPL",plugins:[M,Q,R,O,J,U,W,X,Y,Z,ee,te],toolbar:["undo","redo","|","heading","|","bold","italic","fontSize","fontColor","|","bulletedList","numberedList","|","link","insertTable","blockQuote"],table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]}},x=v(c.post.images||[]),h=v("font-sarabun"),E=v("text-base"),I=[{name:"Sarabun",class:"font-sarabun"},{name:"Prompt",class:"font-prompt"},{name:"Kanit",class:"font-kanit"}],r=v([]),u=a=>r.value.includes(a),w=a=>{u(a)?r.value=r.value.filter(e=>e!==a):r.value.push(a)},z=()=>{r.value.forEach(a=>k(a)),r.value=[]},k=a=>{o.remove_images.includes(a)||o.remove_images.push(a),x.value=x.value.filter(e=>e!==a),u(a)&&w(a)},K=()=>{o.post(route("admin.board.update",c.post.id))};return(a,e)=>(i(),C(A,null,{default:b(()=>[p(l(q),{title:"แก้ไขข่าวสาร"}),(i(),C(D("style"),null,{default:b(()=>[...e[5]||(e[5]=[d(" @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&family=Prompt:wght@300;400;600&family=Sarabun:wght@300;400;600&display=swap'); .font-prompt { font-family: 'Prompt', sans-serif; } .font-sarabun { font-family: 'Sarabun', sans-serif; } .font-kanit { font-family: 'Kanit', sans-serif; } ",-1)])]),_:1})),t("div",le,[t("div",oe,[t("div",ae,[e[6]||(e[6]=t("span",{class:"text-xs text-slate-500 font-bold uppercase tracking-wider"},[t("i",{class:"bi bi-fonts"}),d(" Content Font:")],-1)),t("div",ie,[(i(),n(T,null,S(I,s=>t("button",{key:s.name,onClick:_=>h.value=s.class,class:m(["px-3 py-1 text-xs rounded-md transition-all",h.value===s.class?"bg-white shadow text-blue-600 font-bold":"text-slate-500 hover:text-slate-700"])},f(s.name),11,ne)),64))])])]),t("div",re,[t("h2",de,"แก้ไข: "+f(g.post.title),1),t("form",{onSubmit:V(K,["prevent"]),class:"space-y-6"},[t("div",ue,[g.post.cover_image?(i(),n("div",ce,[t("img",{src:g.post.cover_image,class:"w-full h-full object-cover rounded border bg-white"},null,8,be),e[7]||(e[7]=t("p",{class:"text-xs text-center text-slate-400 mt-1"},"รูปปัจจุบัน",-1))])):y("",!0),t("div",pe,[e[8]||(e[8]=t("label",{class:"block font-medium text-slate-700 mb-1"},"เปลี่ยนรูปปก",-1)),t("input",{type:"file",onInput:e[0]||(e[0]=s=>l(o).cover_image=s.target.files[0]),class:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:bg-blue-600 file:text-white hover:file:bg-blue-700 cursor-pointer",accept:"image/*"},null,32)])]),t("div",me,[t("div",fe,[e[9]||(e[9]=t("label",{class:"block font-medium text-slate-700 mb-1"},"หัวข้อ (Title)",-1)),j(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>l(o).title=s),type:"text",class:"w-full border-slate-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 px-3 py-2",required:""},null,512),[[F,l(o).title]])]),t("div",ge,[e[10]||(e[10]=t("label",{class:"block font-medium text-slate-700 mb-1"},"คำโปรย (Subtitle)",-1)),j(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>l(o).subtitle=s),type:"text",class:"w-full border-slate-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 px-3 py-2"},null,512),[[F,l(o).subtitle]])])]),t("div",null,[e[11]||(e[11]=t("label",{class:"block font-medium text-slate-700 mb-1"},[d(" เนื้อหา (Content) "),t("span",{class:"text-xs font-normal text-slate-400 ml-2"},"*Font ที่เลือกมีผลเฉพาะช่องนี้")],-1)),t("div",{class:m(["ck-editor-wrapper transition-all duration-300",[h.value,E.value]])},[p(l(H),{editor:l(B),modelValue:l(o).content,"onUpdate:modelValue":e[3]||(e[3]=s=>l(o).content=s),config:P},null,8,["editor","modelValue"])],2)]),t("div",xe,[t("div",ve,[e[13]||(e[13]=t("div",null,[t("label",{class:"block font-medium text-slate-700"},"รูปภาพเพิ่มเติม (Gallery)"),t("p",{class:"text-xs text-slate-500"},"คลิกที่รูปเพื่อเลือกหลายรายการ")],-1)),p(L,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-1"},{default:b(()=>[r.value.length>0?(i(),n("button",{key:0,type:"button",onClick:z,class:"text-sm text-white font-bold flex items-center gap-2 bg-red-500 hover:bg-red-600 px-4 py-2 rounded-full shadow-sm transition-colors"},[e[12]||(e[12]=t("i",{class:"bi bi-trash-fill"},null,-1)),d(" ลบ "+f(r.value.length)+" รูปที่เลือก ",1)])):y("",!0)]),_:1})]),x.value.length>0?(i(),n("div",ye,[(i(!0),n(T,null,S(x.value,(s,_)=>(i(),n("div",{key:_,class:m(["relative group aspect-square rounded-lg overflow-hidden cursor-pointer border-2 transition-all duration-200",{"border-red-500 shadow-md":u(s),"border-transparent hover:border-slate-300":!u(s)}]),onClick:N=>w(s)},[t("img",{src:s,class:m(["w-full h-full object-cover bg-white transition-opacity",{"opacity-75":u(s)}])},null,10,we),t("div",{class:m(["absolute top-2 left-2 w-6 h-6 rounded-full bg-white/80 flex items-center justify-center border transition-all",{"bg-red-500 border-red-500 text-white":u(s),"border-slate-300 text-transparent group-hover:border-slate-400":!u(s)}])},[...e[14]||(e[14]=[t("i",{class:"bi bi-check-lg text-sm font-bold"},null,-1)])],2),t("button",{type:"button",onClick:V(N=>k(s),["stop"]),class:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity shadow-md hover:bg-red-600 hover:scale-110 z-10"},[...e[15]||(e[15]=[t("i",{class:"bi bi-x-lg"},null,-1)])],8,ke)],10,he))),128))])):(i(),n("div",_e," ยังไม่มีรูปภาพในแกลเลอรี ")),t("div",Ce,[t("label",Te,[e[16]||(e[16]=t("i",{class:"bi bi-cloud-upload-fill text-purple-600"},null,-1)),e[17]||(e[17]=d(" อัปโหลดรูปเพิ่ม... ",-1)),t("input",{type:"file",multiple:"",onInput:e[4]||(e[4]=s=>l(o).gallery_images=s.target.files),class:"hidden",accept:"image/*"},null,32)]),l(o).gallery_images.length>0?(i(),n("span",Se," เลือกแล้ว "+f(l(o).gallery_images.length)+" ไฟล์ ",1)):y("",!0)]),p(L,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:b(()=>[l(o).remove_images.length>0?(i(),n("p",Ve,[e[18]||(e[18]=t("i",{class:"bi bi-exclamation-triangle-fill"},null,-1)),d(" ระบบจะทำการลบ "+f(l(o).remove_images.length)+' รูปภาพอย่างถาวร เมื่อคุณกดปุ่ม "บันทึกการแก้ไข" ด้านล่าง ',1)])):y("",!0)]),_:1})]),t("div",je,[p(l(G),{href:a.route("admin.board.index"),class:"px-4 py-2 bg-white border border-slate-300 text-slate-600 rounded-lg hover:bg-slate-50 transition-colors"},{default:b(()=>[...e[19]||(e[19]=[d("ยกเลิก",-1)])]),_:1},8,["href"]),t("button",{type:"submit",disabled:l(o).processing,class:"px-6 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 font-bold shadow-md hover:shadow-lg transition-all flex items-center gap-2"},[l(o).processing?(i(),n("i",Le)):(i(),n("i",Be)),e[20]||(e[20]=d(" บันทึกการแก้ไข ",-1))],8,Fe)])],32)])])]),_:1}))}};export{Ne as default};
