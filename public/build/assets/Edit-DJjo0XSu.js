import{u as B,r as m,m as v,k as b,a as p,b as t,d as l,h as j,o as a,n as E,g as n,l as h,c as r,F as y,p as w,q as k,t as g,w as z,f as _,v as C,e as N}from"./app-ePVErmDC.js";import{A as U}from"./AdminLayout-CyNW787d.js";import{_ as D,E as I,P as q,H as M,B as $,I as A,F as H,L as Q,a as R,b as G,T as O,c as W,U as J,C as X}from"./ckeditor5-_j83Zx2X.js";/* empty css            */import"./_plugin-vue_export-helper-DlAUqK2U.js";const Y={class:"max-w-4xl mx-auto"},Z={class:"flex items-center gap-2 mb-6 text-sm text-slate-500"},ee={class:"bg-white p-3 rounded-xl shadow-sm border border-slate-200 mb-6 flex flex-wrap items-center justify-between gap-4 sticky top-4 z-20"},te={class:"flex items-center gap-2"},se={class:"flex bg-slate-100 rounded-lg p-1"},le=["onClick"],oe={class:"bg-white p-8 rounded-xl shadow-sm border border-slate-200"},ae={class:"flex items-center gap-3 mb-6 border-b border-slate-100 pb-4"},ie={class:"text-xl font-bold text-slate-800"},ne={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},re={class:"bg-slate-50 p-6 rounded-lg border border-slate-200"},de={key:0,class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"},ue=["src"],me=["onClick"],be={key:1,class:"text-center py-4 text-slate-400 text-sm italic border-2 border-dashed border-slate-200 rounded-lg mb-4"},pe={class:"flex items-center gap-4"},ge={class:"cursor-pointer bg-white border border-slate-300 hover:border-blue-500 hover:text-blue-600 text-slate-600 px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 shadow-sm"},ce={key:0,class:"text-sm text-green-600 font-medium animate-pulse"},fe={class:"flex justify-end gap-3 pt-4 border-t border-slate-100"},xe=["disabled"],ve={key:0,class:"bi bi-hourglass-split animate-spin"},he={key:1,class:"bi bi-save"},Se={__name:"Edit",props:{page:Object,pageKey:String},setup(c){const d=c,s=B({_method:"PUT",title:d.page.title||"",subtitle:d.page.subtitle||"",content:d.page.content||"",cover_image:null,upload_images:[],remove_images:[]});m(d.page.image_url||null);const T=X,S={licenseKey:"GPL",plugins:[I,q,M,$,A,H,Q,R,G,O,W,J],toolbar:["undo","redo","|","heading","|","bold","italic","fontSize","fontColor","|","bulletedList","numberedList","|","link","insertTable","blockQuote"],table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]}},f=m("font-sarabun"),P=m("text-base"),V=[{name:"Sarabun",class:"font-sarabun"},{name:"Prompt",class:"font-prompt"},{name:"Kanit",class:"font-kanit"}],u=m(d.page.images||[]),F=i=>{s.remove_images.push(i),u.value=u.value.filter(e=>e!==i)},K=()=>{s.post(route("admin.pages.update",d.pageKey),{onSuccess:()=>{s.upload_images=[],s.remove_images=[],s.cover_image=null}})},L=i=>({member:"สิทธิประโยชน์สมาชิก (Member)",board:"สวัสดิการ (Welfare)",ezpoint:"Easy Point"})[i]||i;return(i,e)=>(a(),v(U,null,{default:b(()=>[p(l(j),{title:"แก้ไข: "+c.pageKey},null,8,["title"]),(a(),v(E("style"),null,{default:b(()=>[...e[4]||(e[4]=[n(" @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&family=Prompt:wght@300;400;600&family=Sarabun:wght@300;400;600&display=swap'); .font-prompt { font-family: 'Prompt', sans-serif; } .font-sarabun { font-family: 'Sarabun', sans-serif; } .font-kanit { font-family: 'Kanit', sans-serif; } ",-1)])]),_:1})),t("div",Y,[t("div",Z,[p(l(h),{href:i.route("admin.dashboard"),class:"hover:text-blue-600"},{default:b(()=>[...e[5]||(e[5]=[n("Dashboard",-1)])]),_:1},8,["href"]),e[6]||(e[6]=t("i",{class:"bi bi-chevron-right text-xs"},null,-1)),e[7]||(e[7]=t("span",{class:"text-slate-800 font-bold"},"แก้ไขเนื้อหา",-1))]),t("div",ee,[t("div",te,[e[8]||(e[8]=t("span",{class:"text-xs text-slate-500 font-bold uppercase tracking-wider"},[t("i",{class:"bi bi-fonts"}),n(" Content Font:")],-1)),t("div",se,[(a(),r(y,null,w(V,o=>t("button",{key:o.name,onClick:x=>f.value=o.class,class:k(["px-3 py-1 text-xs rounded-md transition-all",f.value===o.class?"bg-white shadow text-blue-600 font-bold":"text-slate-500 hover:text-slate-700"])},g(o.name),11,le)),64))])])]),t("div",oe,[t("div",ae,[e[10]||(e[10]=t("div",{class:"w-10 h-10 rounded-lg bg-blue-50 text-blue-600 flex items-center justify-center text-xl"},[t("i",{class:"bi bi-pencil-square"})],-1)),t("div",null,[t("h2",ie,"แก้ไข: "+g(L(c.pageKey)),1),e[9]||(e[9]=t("p",{class:"text-xs text-slate-500"},"ปรับปรุงข้อมูลที่แสดงหน้าเว็บไซต์",-1))])]),t("form",{onSubmit:z(K,["prevent"]),class:"space-y-8"},[t("div",ne,[t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-slate-700 mb-1"},"หัวข้อหลัก (Title)",-1)),_(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>l(s).title=o),type:"text",class:"form-input",required:""},null,512),[[C,l(s).title]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-slate-700 mb-1"},"คำโปรย (Subtitle)",-1)),_(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>l(s).subtitle=o),type:"text",class:"form-input"},null,512),[[C,l(s).subtitle]])])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-slate-700 mb-1"},[n(" รายละเอียดเนื้อหา (Content) "),t("span",{class:"text-xs font-normal text-slate-400 ml-2"},"*Font ที่เลือกมีผลเฉพาะช่องนี้")],-1)),t("div",{class:k(["ck-editor-wrapper transition-all duration-300",[f.value,P.value]])},[p(l(D),{editor:l(T),modelValue:l(s).content,"onUpdate:modelValue":e[2]||(e[2]=o=>l(s).content=o),config:S},null,8,["editor","modelValue"])],2)]),t("div",re,[e[17]||(e[17]=t("h3",{class:"font-bold text-slate-700 mb-4 flex items-center gap-2"},[t("i",{class:"bi bi-images"}),n(" จัดการรูปภาพประกอบ (ในเนื้อหา) ")],-1)),u.value.length>0?(a(),r("div",de,[(a(!0),r(y,null,w(u.value,(o,x)=>(a(),r("div",{key:x,class:"group relative aspect-video bg-white rounded-lg overflow-hidden shadow-sm border border-slate-200"},[t("img",{src:o,class:"w-full h-full object-cover"},null,8,ue),t("button",{type:"button",onClick:ye=>F(o),class:"absolute top-2 right-2 bg-red-500 text-white w-8 h-8 rounded-full flex items-center justify-center shadow-md hover:bg-red-600 transition-transform hover:scale-110",title:"ลบรูปนี้"},[...e[14]||(e[14]=[t("i",{class:"bi bi-trash-fill text-sm"},null,-1)])],8,me)]))),128))])):(a(),r("div",be," ยังไม่มีรูปภาพประกอบ ")),t("div",pe,[t("label",ge,[e[15]||(e[15]=t("i",{class:"bi bi-cloud-upload"},null,-1)),e[16]||(e[16]=n(" อัปโหลดรูปเพิ่ม... ",-1)),t("input",{type:"file",multiple:"",onInput:e[3]||(e[3]=o=>l(s).upload_images=o.target.files),class:"hidden",accept:"image/*"},null,32)]),l(s).upload_images.length?(a(),r("span",ce," เลือกแล้ว "+g(l(s).upload_images.length)+" ไฟล์ ",1)):N("",!0)])]),t("div",fe,[p(l(h),{href:i.route("admin.dashboard"),class:"px-6 py-2.5 bg-white border border-slate-300 text-slate-600 rounded-lg hover:bg-slate-50 font-medium transition-colors"},{default:b(()=>[...e[18]||(e[18]=[n(" ยกเลิก ",-1)])]),_:1},8,["href"]),t("button",{type:"submit",disabled:l(s).processing,class:"px-8 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-bold shadow-md hover:shadow-lg transition-all flex items-center gap-2"},[l(s).processing?(a(),r("i",ve)):(a(),r("i",he)),n(" "+g(l(s).processing?"กำลังบันทึก...":"บันทึกการแก้ไข"),1)],8,xe)])],32)])])]),_:1}))}};export{Se as default};
