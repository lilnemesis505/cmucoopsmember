import{u as x,m as B,k as v,a as g,b as e,d as s,h as S,l as V,g as o,t as m,w as h,f,v as p,c as b,e as j,o as a,J as U,F as D,p as E,s as y}from"./app-ePVErmDC.js";import{A as N}from"./AdminLayout-CyNW787d.js";import{S as c}from"./sweetalert2.esm.all-BQxta0Da.js";/* empty css            */import"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"mb-6"},A={class:"text-2xl font-bold text-slate-800"},F={class:"text-blue-600 uppercase"},$={class:"grid grid-cols-1 xl:grid-cols-3 gap-8"},I={class:"xl:col-span-2 space-y-6"},L={class:"bg-white rounded-xl shadow-sm border border-slate-200 p-6"},M=["disabled"],q={class:"bg-white rounded-xl shadow-sm border border-slate-200 p-6"},z={class:"flex-1"},J=["disabled"],O={key:0,class:"w-full bg-gray-200 rounded-full h-1.5 mt-3"},G={class:"space-y-6"},H={class:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden"},K={class:"p-4 border-b border-slate-100 bg-slate-50 flex justify-between items-center"},P={class:"font-bold text-slate-700 text-sm"},Q={class:"max-h-[500px] overflow-y-auto p-2"},R={key:0,class:"text-center py-8 text-slate-400 text-sm"},W={key:1,class:"space-y-2"},X=["src"],Y={class:"flex-1 min-w-0"},Z=["href"],ee=["onClick"],te={class:"bg-red-50 rounded-xl border border-red-100 p-6"},se={class:"text-red-600/80 text-xs mb-4"},ae={__name:"Edit",props:{event:Object,images:Array,key_param:String},setup(n){const d=n,r=x({event_title:d.event.title||"",event_date:d.event.event_date||"",event_description:d.event.description||""}),i=x({event_image:null}),_=()=>{r.post(route("admin.events.update_details",d.key_param),{preserveScroll:!0,onSuccess:()=>{c.fire({icon:"success",title:"บันทึกสำเร็จ",timer:1500,showConfirmButton:!1})}})},w=()=>{i.event_image&&i.post(route("admin.events.upload",d.key_param),{preserveScroll:!0,onSuccess:()=>{i.reset(),c.fire({icon:"success",title:"อัปโหลดสำเร็จ",timer:1500,showConfirmButton:!1})}})},k=u=>{c.fire({title:"ลบรูปภาพ?",text:"คุณต้องการลบรูปภาพนี้ใช่หรือไม่",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"ลบเลย"}).then(t=>{t.isConfirmed&&y.delete(route("admin.events.delete_image",u),{preserveScroll:!0})})},C=()=>{c.fire({title:`ลบกิจกรรม ${d.key_param}?`,text:"การกระทำนี้ไม่สามารถเรียกคืนได้ ข้อมูลทั้งหมดจะหายไป",icon:"error",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"ยืนยันลบ"}).then(u=>{u.isConfirmed&&y.delete(route("admin.events.destroy",d.key_param))})};return(u,t)=>(a(),B(N,null,{default:v(()=>[g(s(S),{title:`แก้ไข ${n.key_param}`},null,8,["title"]),e("div",T,[g(s(V),{href:u.route("admin.events.index"),class:"text-slate-500 hover:text-blue-600 text-sm flex items-center gap-1 mb-2"},{default:v(()=>[...t[4]||(t[4]=[e("i",{class:"bi bi-arrow-left"},null,-1),o(" กลับหน้ารวม ",-1)])]),_:1},8,["href"]),e("h1",A,[t[5]||(t[5]=o(" จัดการ Event: ",-1)),e("span",F,m(n.key_param),1)])]),e("div",$,[e("div",I,[e("div",L,[t[10]||(t[10]=e("h3",{class:"font-bold text-slate-700 mb-4 flex items-center gap-2"},[e("i",{class:"bi bi-pencil-square text-blue-500"}),o(" แก้ไขรายละเอียด ")],-1)),e("form",{onSubmit:h(_,["prevent"]),class:"space-y-4"},[e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1"},"หัวข้อ",-1)),f(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>s(r).event_title=l),type:"text",class:"w-full border-slate-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"ชื่อกิจกรรม..."},null,512),[[p,s(r).event_title]])]),e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1"},"วันที่จัดกิจกรรม",-1)),f(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>s(r).event_date=l),type:"date",class:"w-full border-slate-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,512),[[p,s(r).event_date]])]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1"},"รายละเอียด",-1)),f(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=l=>s(r).event_description=l),rows:"5",class:"w-full border-slate-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"รายละเอียดเนื้อหา..."},null,512),[[p,s(r).event_description]])]),e("button",{type:"submit",disabled:s(r).processing,class:"bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded-lg text-sm font-medium transition-colors"},[...t[9]||(t[9]=[e("i",{class:"bi bi-save me-1"},null,-1),o(" บันทึกข้อมูล ",-1)])],8,M)],32)]),e("div",q,[t[12]||(t[12]=e("h3",{class:"font-bold text-slate-700 mb-4 flex items-center gap-2"},[e("i",{class:"bi bi-cloud-upload text-green-500"}),o(" อัปโหลดรูปภาพ ")],-1)),e("form",{onSubmit:h(w,["prevent"]),class:"flex items-start gap-4"},[e("div",z,[e("input",{type:"file",onInput:t[3]||(t[3]=l=>s(i).event_image=l.target.files[0]),class:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32),t[11]||(t[11]=e("p",{class:"text-xs text-slate-400 mt-1"},"* รองรับไฟล์ jpg, png, jpeg",-1))]),e("button",{type:"submit",disabled:s(i).processing||!s(i).event_image,class:"bg-slate-800 hover:bg-black text-white px-4 py-2 rounded-lg text-sm transition-colors"}," อัปโหลด ",8,J)],32),s(i).progress?(a(),b("div",O,[e("div",{class:"bg-blue-600 h-1.5 rounded-full",style:U({width:s(i).progress.percentage+"%"})},null,4)])):j("",!0)])]),e("div",G,[e("div",H,[e("div",K,[e("h3",P,[t[13]||(t[13]=e("i",{class:"bi bi-images"},null,-1)),o(" รูปภาพ ("+m(n.images.length)+")",1)])]),e("div",Q,[n.images.length===0?(a(),b("div",R," ยังไม่มีรูปภาพ ")):(a(),b("div",W,[(a(!0),b(D,null,E(n.images,l=>(a(),b("div",{key:l.id,class:"flex items-center gap-3 p-2 hover:bg-slate-50 rounded-lg border border-transparent hover:border-slate-100 transition-all"},[e("img",{src:l.image_url,class:"w-16 h-12 object-cover rounded border border-slate-200"},null,8,X),e("div",Y,[e("a",{href:l.image_url,target:"_blank",class:"text-xs text-blue-500 truncate block hover:underline"},m(l.image_url),9,Z)]),e("button",{onClick:le=>k(l.id),class:"text-red-400 hover:text-red-600 p-2 rounded-full hover:bg-red-50 transition-colors"},[...t[14]||(t[14]=[e("i",{class:"bi bi-trash"},null,-1)])],8,ee)]))),128))]))])]),e("div",te,[t[18]||(t[18]=e("h4",{class:"text-red-800 font-bold text-sm mb-2"},"ลบกิจกรรมนี้",-1)),e("p",se,[t[15]||(t[15]=o(" ระบบจะทำการลบข้อมูลของ ",-1)),e("strong",null,m(n.key_param),1),t[16]||(t[16]=o(" ทั้งหมด (หัวข้อ, รายละเอียด, รูปภาพ) การกระทำนี้ไม่สามารถกู้คืนได้ ",-1))]),e("button",{onClick:C,class:"w-full bg-white border border-red-200 text-red-600 hover:bg-red-600 hover:text-white py-2 rounded-lg text-sm font-bold transition-colors"},[...t[17]||(t[17]=[e("i",{class:"bi bi-trash me-1"},null,-1),o(" ยืนยันการลบ ",-1)])])])])])]),_:1}))}};export{ae as default};
